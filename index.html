<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ì‹  ì˜ ì† v14.5 - 16ìˆ˜ ì •ì˜ˆì „ëµ</title>
    <style>
        body { background-color: #000; color: #ffd700; font-family: 'Malgun Gothic', sans-serif; padding: 15px; margin: 0; }
        .outer-border { border: 2px solid #ffd700; border-radius: 20px; padding: 5px; max-width: 450px; margin: 0 auto; }
        .inner-container { padding: 20px 10px; background: #000; }
        h1 { font-size: 26px; font-weight: 900; margin: 0; color: #ffd700; letter-spacing: 2px; text-align: center; cursor: pointer; }
        .target-box { color: #00ffcc; font-size: 13px; margin: 15px 0; border: 1px solid #00ffcc; padding: 10px; border-radius: 10px; font-weight: bold; text-align: center; }
        .btn-main { width: 100%; height: 60px; background: #ffd700; border: none; border-radius: 10px; font-size: 18px; font-weight: 900; cursor: pointer; color: #000; margin-bottom: 20px; }
        .row-line { border-bottom: 1px solid #222; padding: 10px 0; font-size: 20px; display: flex; align-items: center; justify-content: space-between; }
        .row-idx { font-size: 13px; color: #555; min-width: 25px; }
        .num-container { display: flex; gap: 5px; flex-grow: 1; justify-content: center; }
        .num-box { font-family: 'Consolas', monospace; font-weight: 900; width: 32px; text-align: center; }
        .fixed { color: #ff8c00; } 
        .zero { color: #ff4500; text-decoration: underline; } 
        .normal { color: #ffd700; }
        .info { font-size: 11px; color: #444; min-width: 45px; text-align: right; }
    </style>
</head>
<body>
<div class="outer-border">
    <div class="inner-container">
        <h1 onclick="location.reload()">ì‹  ì˜ ì† v14.5</h1>
        <div class="target-box">ğŸ¯ 1-5: 16ìˆ˜(ìƒìœ„15+40ëŒ€ ì†Œì™¸ìˆ˜1) ì••ì¶•<br>ğŸ² 6-10: 22ìˆ˜ ê°€ì¤‘ì¹˜ ë¶„ì‚° (ê¸°ì¡´ ë¡œì§)</div>
        <button class="btn-main" onclick="process()">ë¶„ì„ ì—”ì§„ 10ì¡°í•© ê°€ë™</button>
        <div id="console"></div>
    </div>
</div>

<script>
    const DATA = [
        [1,7,9,17,27,38],[2,17,20,35,37,39],[6,27,30,36,38,42],[10,22,24,27,38,45],
        [1,3,17,26,27,42],[1,4,16,23,31,41],[8,16,28,30,31,44],[3,6,18,29,35,39],
        [5,12,21,33,37,40],[7,9,24,27,35,36],[1,2,4,16,20,32],[16,24,25,30,31,32],
        [26,30,33,38,39,41],[1,5,7,26,28,43],[8,12,15,29,40,45],[3,15,27,33,34,36],
        [3,13,15,24,33,37],[6,9,16,19,24,28],[10,16,23,36,39,40],[1,4,11,12,20,41],
        [7,9,19,23,26,45],[9,19,29,35,37,38],[3,4,12,19,22,27],[5,13,26,29,37,40],
        [2,8,13,16,23,28],[6,17,22,28,29,32],[14,16,23,25,31,37],[4,15,17,23,27,36],
        [1,13,21,25,28,31],[8,10,14,20,33,41]
    ];
    
    let basket16 = [], basket22 = [], zeroFreqNums = [], machineFixed = [];
    const bonus = [35, 10, 43]; 

    function analyze() {
        let freq = {}, serial = {};
        for(let i=1; i<=45; i++) { freq[i]=0; serial[i]=0; }
        DATA.forEach(row => {
            row.forEach((n, i) => {
                freq[n]++;
                if(i < 5 && row[i+1] === n + 1) { serial[n]++; serial[n+1]++; }
            });
        });

        let scored = Object.keys(freq).map(Number).sort((a,b) => {
            let sA = freq[a] * 1.5 + (serial[a] || 0) * 2;
            let sB = freq[b] * 1.5 + (serial[b] || 0) * 2;
            return sB - sA;
        });

        // 1. 40ë²ˆëŒ€ ì†Œì™¸ìˆ˜ ë”± 1ê°œ ì¶”ì¶œ (40~45 ì¤‘ ë¹ˆë„ ìµœì €)
        let loneliestForty = [40,41,42,43,44,45].sort((a,b) => freq[a] - freq[b])[0];

        // 2. 16ìˆ˜ ë°”êµ¬ë‹ˆ: ìƒìœ„ 15ê°œ(40ë²ˆëŒ€ ì œì™¸) + ì†Œì™¸ 40ë²ˆëŒ€ 1ê°œ
        let filteredScored = scored.filter(n => n < 40); 
        basket16 = [...filteredScored.slice(0, 15), loneliestForty]; 
        
        // 3. 22ìˆ˜ ë°”êµ¬ë‹ˆ (ë¶„ì‚°í˜• ë³´ì •)
        basket22 = [...scored.slice(0, 21), loneliestForty];

        machineFixed = scored.slice(0, 3); 
        zeroFreqNums = Object.keys(freq).filter(n => freq[n] === 0).map(Number);
    }

    function process() {
        analyze();
        const box = document.getElementById('console');
        box.innerHTML = "";
        let count = 0, used = new Set(), safety = 0;

        while(count < 10 && safety < 5000) {
            safety++;
            let res = [];
            
            if(count < 5) { // ğŸ¯ ìƒìœ„ 5ê°œ: 16ìˆ˜ ì •ë°€ ì••ì¶•
                res.push(machineFixed[count % 3]);
                let temp = [...basket16].sort(() => Math.random() - 0.5);
                for(let n of temp) { if(res.length < 6 && !res.includes(n)) res.push(n); }
            } 
            else { // ğŸ² í•˜ìœ„ 5ê°œ: 22ìˆ˜ ë¶„ì‚°
                if(count < 7) { res.push(machineFixed[count % 3]); } 
                else {
                    res.push(bonus[count - 7]);
                    if(count === 9 && zeroFreqNums.length > 0) {
                        let shuffledZeros = [...zeroFreqNums].sort(() => Math.random() - 0.5);
                        for(let z of shuffledZeros) { if(res.length < 6) res.push(z); }
                    }
                }
                let temp = [...basket22].sort(() => Math.random() - 0.5);
                for(let n of temp) { if(res.length < 6 && !res.includes(n)) res.push(n); }
            }
            
            while(res.length < 6) {
                let n = Math.floor(Math.random()*45)+1;
                if(!res.includes(n)) res.push(n);
            }

            res.sort((a,b)=>a-b);
            let sum = res.reduce((a,b)=>a+b, 0);
            if(!used.has(res.join(',')) && sum >= 100 && sum <= 190) {
                used.add(res.join(','));
                count++;
                const numsHtml = res.map(n => {
                    let c = "normal";
                    if(machineFixed.includes(n) || (count > 5 && bonus.includes(n))) c = "fixed";
                    if(zeroFreqNums.includes(n)) c = "zero";
                    return `<span class="num-box ${c}">${String(n).padStart(2,'0')}</span>`;
                }).join('');
                let tag = (count <= 5) ? "ğŸ¯" : "ğŸ²";
                box.innerHTML += `<div class="row-line"><span class="row-idx">${tag}</span><div class="num-container">${numsHtml}</div><span class="info">í•©:${sum}</span></div>`;
            }
        }
    }
    window.onload = analyze;
</script>
</body>
</html>
