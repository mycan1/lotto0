<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SHIN-UI-SON v24.1 - 0000 ì •ë°€ ë¶„ì„í˜•</title>
    <style>
        /* ì‚¬ìš©ìë‹˜ì˜ ì›ë³¸ ìŠ¤íƒ€ì¼ 100% ìœ ì§€ */
        :root { --gold: #ffd700; --bg: #0b0b0b; --card: #1a1a1a; --accent: #00ffcc; --save: #ff00ff; --danger: #ff4444; }
        body { background-color: var(--bg); color: var(--gold); font-family: 'Malgun Gothic', sans-serif; padding: 10px; margin: 0; }
        .outer-border { border: 2px solid var(--gold); border-radius: 20px; padding: 15px; max-width: 480px; margin: 0 auto; }
        .header-box { text-align: center; margin-bottom: 10px; }
        .next-episode { font-size: 22px; font-weight: 900; color: #fff; text-shadow: 0 0 10px rgba(255,215,0,0.5); }
        .user-info { background: #333; color: var(--accent); padding: 5px 10px; border-radius: 20px; font-size: 12px; margin-bottom: 10px; text-align: center; }
        .change-name-btn { background: #00ccff; color: white; border: none; border-radius: 5px; padding: 3px 8px; font-size: 10px; margin-left: 5px; cursor: pointer; }
        .status-info { font-size: 11px; color: var(--accent); line-height: 1.5; min-height: 80px; width: 100%; background: rgba(255,255,255,0.05); border-radius: 12px; padding: 10px; box-sizing: border-box; margin-top: 8px; text-align: left; border: 1px solid #333; }
        .btn-group { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin: 15px 0; }
        button { border-radius: 10px; font-weight: bold; cursor: pointer; border: none; height: 50px; transition: 0.2s; }
        .btn-5set { background: linear-gradient(135deg, #00ffcc, #00a884); color: #000; font-size: 16px; }
        .btn-main { background: linear-gradient(135deg, #ffd700, #b8860b); color: #000; font-size: 16px; }
        .btn-sub { background: #222; color: #fff; border: 1px solid #444; }
        .row-line { background: var(--card); border-radius: 12px; padding: 12px; margin-bottom: 10px; display: flex; align-items: center; justify-content: space-between; border: 1px solid #333; }
        .num-box { width: 34px; height: 34px; line-height: 34px; text-align: center; font-size: 14px; font-weight: 900; border-radius: 50%; color: #fff; }
        .fixed { background: linear-gradient(135deg, #00ffcc, #00a884); color: #000; } 
        .zero { background: linear-gradient(135deg, #ff4444, #b30000); } 
        .normal { background: #444; border: 1px solid var(--gold); }
        .save-btn { font-size: 11px; background: var(--save); color: white; padding: 6px 10px; border-radius: 6px; cursor: pointer; }
        .popup-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 1000; }
        .popup-content { background: var(--card); border: 2px solid var(--gold); border-radius: 20px; padding: 20px; max-width: 400px; width: 90%; max-height: 70vh; overflow-y: auto; position: relative; }
    </style>
</head>
<body>

<div class="outer-border">
    <div class="header-box">
        <span class="next-episode">SHIN-UI-SON v24.1</span>
        <div id="userDisplay" class="user-info"></div>
        <div id="status" class="status-info">0000 ì—”ì§„ ì´ˆê¸°í™” ì¤‘...</div>
    </div>

    <div class="btn-group">
        <button class="btn-5set" onclick="process(5)">5ì¡°í•© ì¶”ì¶œ</button>
        <button class="btn-main" onclick="process(10)">10ì¡°í•© ì¶”ì¶œ</button>
        <button class="btn-sub" onclick="openPopup()">ë³´ê´€í•¨</button>
        <button class="btn-sub" onclick="clearStorage()">ì´ˆê¸°í™”</button>
        <button class="btn-sub" style="grid-column: span 2; height: 40px;" onclick="location.reload()">ìƒˆë¡œê³ ì¹¨</button>
    </div>

    <div id="console"></div>
</div>

<div id="popup" class="popup-overlay" style="display:none;">
    <div class="popup-content">
        <span onclick="closePopup()" style="position:absolute; top:10px; right:15px; font-size:24px; cursor:pointer;">&times;</span>
        <div id="storageTitle" style="font-size:18px; font-weight:bold; margin-bottom:15px; text-align:center;">ğŸ“¦ ë³´ê´€í•¨</div>
        <div id="storage"></div>
    </div>
</div>

<script>
    // [0000 ì—”ì§„ ë°ì´í„°] 1213íšŒì°¨ ì£¼ê¸° ë°ì´í„° ë° ì´ì›”ìˆ˜ 1212íšŒ ì ìš©
    const TARGET_CYCLE = [[4,5,12,16,22,35,34],[10,12,13,19,33,40,2],[8,13,19,27,40,45,12],[8,13,18,24,27,29,17],[7,9,22,27,37,42,34]];
    const LAST_WIN = [1, 7, 10, 12, 14, 18]; // 1212íšŒ ë‹¹ì²¨ë²ˆí˜¸

    let userName = "";
    let savedNumbers = [];
    let basket = [], zeroNums = [];

    // [ê¸°ëŠ¥] ì‚¬ìš©ì ì´ë¦„ ê´€ë¦¬ ë° ë°ì´í„° ë¡œë“œ
    function initUser() {
        userName = localStorage.getItem('0000UserName') || "guest_" + Math.random().toString(36).substring(2, 6);
        localStorage.setItem('0000UserName', userName);
        const data = localStorage.getItem(`0000Save_${userName}`);
        savedNumbers = data ? JSON.parse(data) : [];
        updateUserDisplay();
    }

    function updateUserDisplay() {
        document.getElementById('userDisplay').innerHTML = `ğŸ‘¤ ì ‘ì†ì: ${userName} 
            <button class="change-name-btn" onclick="changeName()">ë³€ê²½</button>
            <button class="change-name-btn" style="background:#ff4444;" onclick="deleteUser()">ì‚­ì œ</button>`;
    }

    function changeName() {
        const name = prompt("ì´ë¦„ ë³€ê²½:", userName);
        if (name) { userName = name; localStorage.setItem('0000UserName', name); initUser(); }
    }

    function deleteUser() {
        if(confirm("ê¸°ë¡ì„ ì‚­ì œí• ê¹Œìš”?")) { localStorage.removeItem(`0000Save_${userName}`); initUser(); }
    }

    // [0000 ë¡œì§] ì£¼ê¸° ë¶„ì„ ë° ì´ì›”ìˆ˜ ìŠ¹ê²©
    function analyze() {
        let pool = [];
        TARGET_CYCLE.forEach(r => pool.push(...r.slice(0, 6)));
        let counts = {}; pool.forEach(n => counts[n] = (counts[n] || 0) + 1);
        let survivors = [...new Set(pool.concat(TARGET_CYCLE.map(r => r[6])))];
        
        // ì´ì›”ìˆ˜ ê°€ì¤‘ì¹˜ ì •ë ¬
        survivors.sort((a, b) => {
            let aIn = LAST_WIN.includes(a) ? 1 : 0;
            let bIn = LAST_WIN.includes(b) ? 1 : 0;
            if (aIn !== bIn) return bIn - aIn;
            return (counts[b] || 0) - (counts[a] || 0);
        });

        basket = survivors.slice(0, 17);
        zeroNums = [23, 26, 35, 38, 40]; // ì˜ˆì‹œ ë¯¸ì¶œìˆ˜ ë°ì´í„°

        document.getElementById('status').innerHTML = `
            <div><span class="highlight-gold">â˜… SHIN-UI-SON v24.1 [1213íšŒ íŠ¹í™”]</span></div>
            <div><span style="color:#ff4444">ğŸ¯ 1213íšŒ ì „ëµ 17ìˆ˜ ë¶„ì„ ì™„ë£Œ</span></div>
            <div>ì••ì¶• í›„ë³´: ${basket.sort((a,b)=>a-b).join(', ')}</div>
        `;
    }

    function process(limit) {
        const box = document.getElementById('console'); box.innerHTML = "";
        for(let i=0; i<limit; i++) {
            let res = [...basket].sort(() => Math.random() - 0.5).slice(0, 6).sort((a,b)=>a-b);
            renderRow(res, box);
        }
    }

    function renderRow(arr, target) {
        const key = arr.join(',');
        const html = arr.map(n => {
            let cls = LAST_WIN.includes(n) ? "fixed" : (zeroNums.includes(n) ? "zero" : "normal");
            return `<span class="num-box ${cls}">${n}</span>`;
        }).join('');
        target.innerHTML += `<div class="row-line"><div style="display:flex; gap:5px; flex-grow:1; justify-content:center;">${html}</div><div class="save-btn" onclick="saveToBox('${key}')">ì €ì¥</div></div>`;
    }

    function saveToBox(key) {
        if(!savedNumbers.includes(key)) {
            savedNumbers.push(key);
            localStorage.setItem(`0000Save_${userName}`, JSON.stringify(savedNumbers));
            alert("ë³´ê´€í•¨ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
        }
    }

    function openPopup() {
        document.getElementById('popup').style.display = 'flex';
        const st = document.getElementById('storage');
        st.innerHTML = savedNumbers.map(n => `<div class="row-line" style="background:#2a2a2a;">${n}</div>`).join('') || "ë¹„ì–´ìˆìŒ";
    }

    function closePopup() { document.getElementById('popup').style.display = 'none'; }
    function clearStorage() { if(confirm("ì´ˆê¸°í™”?")) { savedNumbers = []; localStorage.removeItem(`0000Save_${userName}`); } }

    window.onload = function() { initUser(); analyze(); };
</script>
</body>
</html>
