<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SHIN-UI-SON v24.1</title>
    <style>
        /* [ê¸°ëŠ¥ & ë””ìì¸ 100% ë³µêµ¬] */
        :root { --gold: #ffd700; --bg: #0b0b0b; --card: #1a1a1a; --accent: #00ffcc; --save: #ff00ff; --danger: #ff4444; }
        body { background-color: var(--bg); color: var(--gold); font-family: 'Malgun Gothic', sans-serif; padding: 10px; margin: 0; }
        .outer-border { border: 2px solid var(--gold); border-radius: 20px; padding: 15px; max-width: 450px; margin: 0 auto; box-shadow: 0 0 15px rgba(255,215,0,0.1); }
        
        /* íƒ€ì´í‹€ & ë³´ì•ˆë°” */
        .admin-bar { display: flex; justify-content: flex-end; gap: 5px; margin-bottom: 8px; }
        .master-pw { background: #222; color: var(--gold); border: 1px solid #444; border-radius: 5px; padding: 4px; width: 70px; font-size: 11px; }
        .auth-btn { background: var(--gold); color: #000; border: none; padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: bold; cursor: pointer; }
        
        .header-box { text-align: center; margin-bottom: 10px; }
        .next-episode { font-size: 26px; font-weight: 900; color: #fff; text-shadow: 0 0 10px rgba(255,215,0,0.5); }

        /* ì…ë ¥ ì„¹ì…˜ (ë§ˆìŠ¤í„° ì ê¸ˆ) */
        .input-section { border: 1px dashed #444; border-radius: 12px; padding: 10px; margin-bottom: 10px; text-align: center; opacity: 0.4; pointer-events: none; transition: 0.3s; }
        .win-input { width: 34px; height: 34px; background: #222; border: 1px solid var(--gold); color: #fff; text-align: center; font-size: 16px; font-weight: bold; border-radius: 6px; margin: 2px; }

        /* ì‚¬ìš©ì í‘œì‹œ & ë¹¨ê°„ìƒ‰ ë²„íŠ¼ */
        .user-info { background: #333; color: var(--accent); padding: 5px 10px; border-radius: 20px; font-size: 12px; margin-bottom: 10px; text-align: center; border: 1px solid #444; }
        .change-name-btn { background: var(--danger); color: white; border: none; border-radius: 5px; padding: 3px 8px; font-size: 10px; margin-left: 5px; cursor: pointer; font-weight: bold; }
        
        /* ë¶„ì„ì°½ ë””ìì¸ */
        .status-info { font-size: 11px; color: var(--accent); line-height: 1.5; min-height: 80px; width: 100%; background: rgba(255,255,255,0.05); border-radius: 12px; padding: 10px; box-sizing: border-box; margin-top: 8px; border: 1px solid #333; }
        
        /* ë²„íŠ¼ ê·¸ë£¹ */
        .btn-group { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin: 15px 0; }
        button { border-radius: 10px; font-weight: bold; cursor: pointer; border: none; height: 48px; font-size: 16px; transition: 0.2s; }
        .btn-5set { background: linear-gradient(135deg, #00ffcc, #00a884); color: #000; }
        .btn-main { background: linear-gradient(135deg, #ffd700, #b8860b); color: #000; }
        .btn-sub { background: #222; color: #fff; border: 1px solid #444; font-size: 13px; }

        /* ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ (ì‹­ì ìŠ¤íƒ€ì¼) */
        .row-line { background: var(--card); border-radius: 12px; padding: 12px; margin-bottom: 8px; display: flex; align-items: center; justify-content: space-between; border: 1px solid #333; }
        .num-box { width: 36px; height: 36px; line-height: 36px; text-align: center; font-size: 15px; font-weight: 900; border-radius: 50%; color: #fff; }
        .fixed { background: linear-gradient(135deg, #00ffcc, #00a884); color: #000; box-shadow: 0 0 5px #00ffcc; } 
        .normal { background: #444; border: 1px solid var(--gold); }
        .save-btn { font-size: 11px; background: var(--save); color: white; padding: 6px 10px; border-radius: 6px; cursor: pointer; font-weight: bold; }

        /* [ì¤‘ìš”] ë³´ê´€í•¨ íŒì—… ë ˆì´ì–´ ë³µêµ¬ */
        .popup-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: none; align-items: center; justify-content: center; z-index: 1000; }
        .popup-content { background: var(--card); border: 2px solid var(--gold); border-radius: 20px; padding: 20px; width: 90%; max-height: 80vh; overflow-y: auto; position: relative; }
        .close-popup { position: absolute; top: 10px; right: 15px; font-size: 24px; color: var(--gold); cursor: pointer; }
    </style>
</head>
<body>

<div class="outer-border">
    <div class="admin-bar">
        <input type="password" id="masterKey" class="master-pw" placeholder="ë³´ì•ˆí‚¤">
        <button onclick="unlockMaster()" class="auth-btn">ì¸ì¦</button>
    </div>

    <div class="header-box">
        <div class="next-episode">SHIN-UI-SON v24.1</div>
        <div id="userDisplay" class="user-info"></div>
    </div>

    <div class="input-section" id="lockArea">
        <div style="font-size: 11px; color: #aaa; margin-bottom: 5px;">[1212íšŒ ë‹¹ì²¨ë²ˆí˜¸ ì…ë ¥ì°½]</div>
        <input type="number" class="win-input" value="1" disabled>
        <input type="number" class="win-input" value="7" disabled>
        <input type="number" class="win-input" value="10" disabled>
        <input type="number" class="win-input" value="12" disabled>
        <input type="number" class="win-input" value="14" disabled>
        <input type="number" class="win-input" value="18" disabled>
    </div>

    <div id="status" class="status-info">0000 1213íšŒ íŠ¹í™” ì—”ì§„ ë¶„ì„ ì¤‘...</div>

    <div class="btn-group">
        <button class="btn-5set" onclick="process(5)">5ì¡°í•© ì¶”ì¶œ</button>
        <button class="btn-main" onclick="process(10)">10ì¡°í•© ì¶”ì¶œ</button>
        <button class="btn-sub" onclick="openPopup()">ğŸ“‚ ë³´ê´€í•¨</button>
        <button class="btn-sub" onclick="clearData()">ğŸ§¹ ê¸°ë¡ ì‚­ì œ</button>
    </div>

    <div id="console"></div>
</div>

<div id="popup" class="popup-overlay">
    <div class="popup-content">
        <span class="close-popup" onclick="closePopup()">&times;</span>
        <div style="font-size: 18px; font-weight: bold; margin-bottom: 15px; text-align: center; color: var(--gold);">ğŸ“¦ ë§ˆìŠ¤í„° ë³´ê´€í•¨</div>
        <div id="storageArea"></div>
    </div>
</div>

<script>
    const MASTER_CODE = "0000";
    const TARGET_CYCLE = [[4,5,12,16,22,35,34], [10,12,13,19,33,40,2], [8,13,19,27,40,45,12], [8,13,18,24,27,29,17], [7,9,22,27,37,42,34]];
    
    let user = "", saved = [], basket = [], wins = [];

    // [ë³´ì•ˆ] ë§ˆìŠ¤í„° ì¸ì¦
    function unlockMaster() {
        if (document.getElementById('masterKey').value === MASTER_CODE) {
            alert("ë§ˆìŠ¤í„° ê¶Œí•œ ìŠ¹ì¸");
            const area = document.getElementById('lockArea');
            area.style.opacity = "1"; area.style.pointerEvents = "auto";
            document.querySelectorAll('.win-input').forEach(i => i.disabled = false);
        } else { alert("ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜"); }
    }

    // [ì‚¬ìš©ì ê´€ë¦¬]
    function init() {
        user = localStorage.getItem('0000_user') || "guest_" + Math.random().toString(36).substring(2,6);
        localStorage.setItem('0000_user', user);
        saved = JSON.parse(localStorage.getItem(`0000_save_${user}`) || "[]");
        updateUserUI();
        runAnalysis();
    }

    function updateUserUI() {
        document.getElementById('userDisplay').innerHTML = `ğŸ‘¤ ì ‘ì†ì: <b>${user}</b> 
            <button class="change-name-btn" onclick="changeName()">ì´ë¦„ë³€ê²½</button>`;
    }

    function changeName() {
        const n = prompt("ìƒˆë¡œìš´ ì‚¬ìš©ì ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”:", user);
        if(n) { user = n; localStorage.setItem('0000_user', n); init(); }
    }

    // [0000 ë¶„ì„ ì—”ì§„]
    function runAnalysis() {
        wins = Array.from(document.querySelectorAll('.win-input')).map(i => parseInt(i.value) || 0);
        let pool = []; TARGET_CYCLE.forEach(r => pool.push(...r.slice(0,6)));
        let counts = {}; pool.forEach(n => counts[n] = (counts[n] || 0) + 1);
        let candidates = [...new Set(pool.concat(TARGET_CYCLE.map(r => r[6])))];
        
        candidates.sort((a,b) => {
            let aW = wins.includes(a) ? 1 : 0, bW = wins.includes(b) ? 1 : 0;
            if(aW !== bW) return bW - aW;
            return (counts[b]||0) - (counts[a]||0);
        });

        basket = candidates.slice(0, 17);
        document.getElementById('status').innerHTML = `
            <div style="color:var(--gold); font-weight:bold;">â˜… 1213íšŒì°¨ 0000 ë§ˆìŠ¤í„° ë¶„ì„</div>
            <div>ì¶”ì¶œ ì •ì˜ˆ 17ìˆ˜: ${basket.sort((a,b)=>a-b).join(', ')}</div>
            <div style="font-size:10px; opacity:0.5;">ë¶„ì„ë°©ì‹: 52ì£¼ ì£¼ê¸° ë™ê¸°í™” + ì´ì›”ìˆ˜ ìš°ì„ ìˆœìœ„ ê°€ì¤‘ì¹˜</div>
        `;
    }

    // [ì¡°í•© ë° ì €ì¥ ê¸°ëŠ¥]
    function process(count) {
        runAnalysis();
        const box = document.getElementById('console'); box.innerHTML = "";
        for(let i=0; i<count; i++) {
            let res = [...basket].sort(()=>Math.random()-0.5).slice(0,6).sort((a,b)=>a-b);
            const html = res.map(n => `<span class="num-box ${wins.includes(n)?'fixed':'normal'}">${n}</span>`).join('');
            box.innerHTML += `<div class="row-line">
                <div style="display:flex; gap:5px; justify-content:center; flex-grow:1;">${html}</div>
                <div class="save-btn" onclick="doSave('${res.join(',')}')">ì €ì¥</div>
            </div>`;
        }
    }

    function doSave(k) {
        if(!saved.includes(k)) {
            saved.push(k);
            localStorage.setItem(`0000_save_${user}`, JSON.stringify(saved));
            alert("ë³´ê´€í•¨ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
        }
    }

    // [íŒì—… ì œì–´]
    function openPopup() {
        document.getElementById('popup').style.display = 'flex';
        const area = document.getElementById('storageArea');
        area.innerHTML = saved.map(s => `<div class="row-line" style="background:#222; margin-bottom:8px;">${s}</div>`).join('') || "ì €ì¥ëœ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.";
    }

    function closePopup() { document.getElementById('popup').style.display = 'none'; }
    function clearData() { if(confirm("ëª¨ë“  ë³´ê´€ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) { saved = []; localStorage.removeItem(`0000_save_${user}`); openPopup(); } }

    window.onload = init;
</script>
</body>
</html>
