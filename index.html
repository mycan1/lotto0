<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SHIN-UI-SON v24.1 - Master Edition</title>
    <style>
        :root { --gold: #ffd700; --bg: #0b0b0b; --card: #1a1a1a; --accent: #00ffcc; --save: #ff00ff; --danger: #ff4444; }
        body { background-color: var(--bg); color: var(--gold); font-family: 'Malgun Gothic', sans-serif; padding: 10px; margin: 0; }
        
        /* ë©”ì¸ ì»¨í…Œì´ë„ˆ - ê¸ˆìƒ‰ í…Œë‘ë¦¬ ë° ê·¸ë¦¼ì íš¨ê³¼ */
        .outer-border { border: 3px solid var(--gold); border-radius: 25px; padding: 20px; max-width: 500px; margin: 0 auto; box-shadow: 0 0 30px rgba(255,215,0,0.15); }
        
        /* íƒ€ì´í‹€ ì„¹ì…˜ - ê¸€ì í¬ê¸° ëŒ€í­ í™•ëŒ€ */
        .header-box { text-align: center; margin-bottom: 20px; }
        .next-episode { font-size: 42px; font-weight: 900; color: #fff; text-shadow: 0 0 15px rgba(255,215,0,0.8); letter-spacing: -1px; }
        .sub-title { font-size: 28px; color: var(--gold); font-weight: bold; margin: 10px 0; }
        
        /* ê´€ë¦¬ì ë³´ì•ˆ ì¸ì¦ */
        .admin-lock-bar { display: flex; justify-content: flex-end; align-items: center; gap: 5px; margin-bottom: 10px; }
        .master-pw { background: #222; color: var(--gold); border: 1px solid #444; border-radius: 5px; padding: 6px; width: 90px; font-size: 13px; }
        .auth-btn { background: var(--gold); color: #000; border: none; padding: 6px 12px; border-radius: 5px; font-weight: bold; cursor: pointer; font-size: 12px; }

        /* ì…ë ¥ ì„¹ì…˜ (ë§ˆìŠ¤í„° ì „ìš© ì ê¸ˆ) */
        .input-section { background: rgba(255, 215, 0, 0.05); border: 1px dashed var(--gold); border-radius: 15px; padding: 18px; margin-bottom: 15px; text-align: center; transition: 0.3s; }
        .win-input { width: 45px; height: 45px; background: #333; border: 1px solid var(--gold); color: #fff; text-align: center; font-size: 20px; font-weight: bold; border-radius: 10px; margin: 3px; }
        .win-input:disabled { border-color: #444; color: #666; cursor: not-allowed; }

        /* ì‚¬ìš©ì ì •ë³´ - ë¹¨ê°„ìƒ‰ ë²„íŠ¼ ë³µêµ¬ */
        .user-info { background: #222; color: var(--accent); padding: 10px; border-radius: 25px; font-size: 16px; margin-bottom: 15px; border: 1px solid #333; text-align: center; }
        .change-name-btn { background: var(--danger); color: white; border: none; border-radius: 8px; padding: 6px 15px; font-size: 13px; margin-left: 10px; cursor: pointer; font-weight: bold; }
        
        /* ë¶„ì„ ë¦¬í¬íŠ¸ ì°½ */
        .status-info { font-size: 16px; color: var(--accent); line-height: 1.7; min-height: 110px; background: rgba(0, 255, 204, 0.05); border-radius: 18px; padding: 18px; border: 1px solid #004433; margin-bottom: 20px; }
        
        /* ë²„íŠ¼ ê·¸ë£¹ */
        .btn-group { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px; }
        .main-btn { height: 65px; border-radius: 15px; font-size: 22px; font-weight: bold; border: none; cursor: pointer; transition: 0.2s; }
        .btn-5 { background: linear-gradient(135deg, #00ffcc, #00a884); color: #000; }
        .btn-10 { background: linear-gradient(135deg, #ffd700, #b8860b); color: #000; }
        .btn-side { height: 50px; background: #333; color: #fff; border: 1px solid #555; font-size: 16px; border-radius: 12px; }

        /* ì¡°í•© ì¶œë ¥ ë””ìì¸ (ì‹­ì ë°°ì¹˜ ìŠ¤íƒ€ì¼ ìœ ì§€) */
        .row-line { background: var(--card); border-radius: 15px; padding: 15px; margin-bottom: 12px; display: flex; align-items: center; justify-content: space-between; border: 1px solid #333; }
        .num-box { width: 42px; height: 42px; line-height: 42px; text-align: center; font-size: 19px; font-weight: 900; border-radius: 50%; color: #fff; }
        .fixed { background: linear-gradient(135deg, #00ffcc, #00a884); color: #000; box-shadow: 0 0 10px #00ffcc; } 
        .normal { background: #444; border: 1px solid var(--gold); }
        .save-btn { font-size: 14px; background: var(--save); color: white; padding: 8px 14px; border-radius: 8px; font-weight: bold; cursor: pointer; }

        /* ë³´ê´€í•¨ íŒì—… */
        .popup-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); display: flex; align-items: center; justify-content: center; z-index: 1000; }
        .popup-content { background: var(--card); border: 2px solid var(--gold); border-radius: 25px; padding: 25px; width: 90%; max-height: 85vh; overflow-y: auto; position: relative; }
    </style>
</head>
<body>

<div class="outer-border">
    <div class="admin-lock-bar">
        <input type="password" id="masterKey" class="master-pw" placeholder="ë³´ì•ˆí‚¤">
        <button onclick="unlockMaster()" class="auth-btn">ì¸ì¦</button>
    </div>

    <div class="header-box">
        <div class="next-episode">SHIN-UI-SON v24.1</div>
        <div class="sub-title">ğŸ¯ 1213íšŒì°¨ í†µí•© ì—”ì§„</div>
        <div id="userDisplay" class="user-info"></div>
    </div>

    <div class="input-section" id="lockArea" style="opacity: 0.4; pointer-events: none;">
        <div style="font-size: 15px; color: #fff; margin-bottom: 10px; font-weight: bold;">[Master] 1212íšŒ ë‹¹ì²¨ë²ˆí˜¸ ì—…ë°ì´íŠ¸</div>
        <div id="inputGroup">
            <input type="number" class="win-input" value="1" disabled>
            <input type="number" class="win-input" value="7" disabled>
            <input type="number" class="win-input" value="10" disabled>
            <input type="number" class="win-input" value="12" disabled>
            <input type="number" class="win-input" value="14" disabled>
            <input type="number" class="win-input" value="18" disabled>
        </div>
        <div id="authLabel" style="font-size: 12px; color: var(--danger); margin-top: 10px; font-weight: bold;">ğŸ”’ ë‹¤ë¥¸ ì‚¬ìš©ìëŠ” ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>
    </div>

    <div id="status" class="status-info">ë°ì´í„° ë¡œë”© ì¤‘...</div>

    <div class="btn-group">
        <button class="main-btn btn-5" onclick="process(5)">5ì¡°í•© ì¶”ì¶œ</button>
        <button class="main-btn btn-10" onclick="process(10)">10ì¡°í•© ì¶”ì¶œ</button>
        <button class="btn-side" onclick="openPopup()">ğŸ“‚ ë³´ê´€í•¨</button>
        <button class="btn-side" onclick="clearData()">ğŸ§¹ ê¸°ë¡ ì‚­ì œ</button>
        <button class="btn-side" style="grid-column: span 2; height: 45px;" onclick="location.reload()">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
    </div>

    <div id="console"></div>
</div>

<div id="popup" class="popup-overlay" style="display:none;">
    <div class="popup-content">
        <span onclick="closePopup()" style="position:absolute; top:20px; right:25px; font-size:35px; cursor:pointer; color:var(--gold);">&times;</span>
        <div style="font-size:24px; font-weight:bold; margin-bottom:25px; text-align:center; color:var(--gold);">ğŸ“¦ 1213íšŒ ì €ì¥ ë¦¬ìŠ¤íŠ¸</div>
        <div id="storageContent"></div>
    </div>
</div>

<script>
    const MASTER_CODE = "0000"; // ì‚¬ìš©ìë‹˜ë§Œ ì•„ëŠ” ë¹„ë°€ë²ˆí˜¸
    const TARGET_CYCLE = [[4,5,12,16,22,35,34], [10,12,13,19,33,40,2], [8,13,19,27,40,45,12], [8,13,18,24,27,29,17], [7,9,22,27,37,42,34]];

    let user = "", saved = [], basket = [], wins = [];

    // [ë³´ì•ˆ] ë§ˆìŠ¤í„° ì¸ì¦ í•¨ìˆ˜
    function unlockMaster() {
        const inputKey = document.getElementById('masterKey').value;
        if (inputKey === MASTER_CODE) {
            alert("ë§ˆìŠ¤í„° ê¶Œí•œì´ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.");
            const area = document.getElementById('lockArea');
            area.style.opacity = "1";
            area.style.pointerEvents = "auto";
            document.getElementById('authLabel').innerHTML = "ğŸ”“ ì—…ë°ì´íŠ¸ ê¶Œí•œ í™œì„±í™”ë¨";
            document.getElementById('authLabel').style.color = "var(--accent)";
            document.querySelectorAll('.win-input').forEach(i => i.disabled = false);
        } else {
            alert("ë³´ì•ˆí‚¤ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.");
        }
    }

    // [ì‹œìŠ¤í…œ ì´ˆê¸°í™”]
    function init() {
        user = localStorage.getItem('lotto_user') || "guest_" + Math.random().toString(36).substring(2,6);
        localStorage.setItem('lotto_user', user);
        const savedData = localStorage.getItem(`lotto_save_${user}`);
        saved = savedData ? JSON.parse(savedData) : [];
        updateUserUI();
        runAnalysis();
    }

    function updateUserUI() {
        document.getElementById('userDisplay').innerHTML = `ğŸ‘¤ ì‚¬ìš©ì: <b>${user}</b> 
            <button class="change-name-btn" onclick="changeUserName()">ì´ë¦„ë³€ê²½</button>`;
    }

    function changeUserName() {
        const n = prompt("ìƒˆ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”:", user);
        if(n) { user = n; localStorage.setItem('lotto_user', n); init(); }
    }

    // [0000 ë¶„ì„ ì—”ì§„]
    function runAnalysis() {
        const inputs = document.querySelectorAll('.win-input');
        wins = Array.from(inputs).map(i => parseInt(i.value) || 0);
        
        let pool = [];
        TARGET_CYCLE.forEach(r => pool.push(...r.slice(0,6)));
        let counts = {}; pool.forEach(n => counts[n] = (counts[n] || 0) + 1);
        let candidates = [...new Set(pool.concat(TARGET_CYCLE.map(r => r[6])))];
        
        candidates.sort((a,b) => {
            let aW = wins.includes(a) ? 1 : 0;
            let bW = wins.includes(b) ? 1 : 0;
            if(aW !== bW) return bW - aW;
            return (counts[b]||0) - (counts[a]||0);
        });

        basket = candidates.slice(0, 17);
        document.getElementById('status').innerHTML = `
            <div style="font-size:19px; color:var(--gold); margin-bottom:8px;"><b>[1213íšŒ íŠ¹í™” ë¶„ì„ ë°ì´í„°]</b></div>
            <div style="color:#fff;">ğŸ¯ ì´ì›”ìˆ˜ ë° 52ì£¼ ì£¼ê¸° ë™ê¸°í™” ì™„ë£Œ</div>
            <div style="word-break:break-all; font-weight:bold; color:var(--accent); font-size:20px;">${basket.sort((a,b)=>a-b).join(', ')}</div>
        `;
    }

    function process(count) {
        runAnalysis();
        const box = document.getElementById('console');
        box.innerHTML = "";
        for(let i=0; i<count; i++) {
            let res = [...basket].sort(()=>Math.random()-0.5).slice(0,6).sort((a,b)=>a-b);
            renderRow(res, box);
        }
    }

    function renderRow(arr, target) {
        const key = arr.join(',');
        const html = arr.map(n => `<span class="num-box ${wins.includes(n)?'fixed':'normal'}">${n}</span>`).join('');
        target.innerHTML += `<div class="row-line">
            <div style="display:flex; gap:8px; flex-grow:1; justify-content:center;">${html}</div>
            <div class="save-btn" onclick="doSave('${key}')">ì €ì¥</div>
        </div>`;
    }

    function doSave(k) {
        if(!saved.includes(k)) {
            saved.push(k);
            localStorage.setItem(`lotto_save_${user}`, JSON.stringify(saved));
            alert("ì €ì¥ ì„±ê³µ!");
        }
    }

    function openPopup() {
        document.getElementById('popup').style.display = 'flex';
        const st = document.getElementById('storageContent');
        st.innerHTML = saved.map(s => `<div class="row-line" style="background:#222; margin-bottom:10px;">${s}</div>`).join('') || "ì €ì¥ëœ ì¡°í•©ì´ ì—†ìŠµë‹ˆë‹¤.";
    }

    function closePopup() { document.getElementById('popup').style.display = 'none'; }
    function clearData() { if(confirm("ëª¨ë“  ê¸°ë¡ì„ ì‚­ì œí• ê¹Œìš”?")) { saved = []; localStorage.removeItem(`lotto_save_${user}`); openPopup(); } }

    window.onload = init;
</script>
</body>
</html>
